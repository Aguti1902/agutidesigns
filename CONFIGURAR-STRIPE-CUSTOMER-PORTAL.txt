CONFIGURACIÃ“N DEL STRIPE CUSTOMER PORTAL
=========================================

URL: https://dashboard.stripe.com/test/settings/billing/portal

NOTA IMPORTANTE:
----------------
âœ… El mensaje de advertencia (6 meses) ya estÃ¡ implementado en el dashboard.
   Se mostrarÃ¡ ANTES de redirigir al cliente a Stripe.
   NO necesitas configurarlo en Stripe.

PASOS (SIMPLIFICADOS):
----------------------

1. ACTIVAR EL CUSTOMER PORTAL
   - Click en "Activate test link" o "Activar enlace de prueba"
   - O si ya estÃ¡ activo, click en "Configure" / "Configurar"

2. SECCIÃ“N "Cancelaciones" o "Cancellations"
   
   âœ… Activa: "Permitir que los clientes cancelen suscripciones"
            o "Allow customers to cancel subscriptions"
   
   âœ… Selecciona: "Cancelar al final del perÃ­odo de facturaciÃ³n"
                o "Cancel at period end"
   
   (NO selecciones "cancelar inmediatamente")

3. SECCIÃ“N "Razones de cancelaciÃ³n" (OPCIONAL)
   
   Puedes activar:
   - [x] "Solicitar motivo de cancelaciÃ³n"
         o "Require customers to provide a reason"
   
   Stripe mostrarÃ¡ sus razones predefinidas:
   â€¢ Demasiado caro
   â€¢ No uso el servicio
   â€¢ EncontrÃ© una alternativa mejor
   â€¢ etc.

4. SECCIÃ“N "Cupones de retenciÃ³n" (OPCIONAL)
   
   Si quieres ofrecer un descuento automÃ¡tico del 20%:
   - Click en "AÃ±adir restricciones a un cupÃ³n"
   - Selecciona: "Oferta de retenciÃ³n 20%"
   - Configura: "Descuento de 20% durante 3 meses"
   
   (Esto ya lo creaste antes)

5. OTRAS CONFIGURACIONES RECOMENDADAS
   
   âœ… Customer information
      - [x] Permitir actualizar email
   
   âœ… Payment methods
      - [x] Permitir actualizar mÃ©todos de pago
      - [x] Permitir eliminar mÃ©todos de pago
   
   âœ… Invoices
      - [x] Permitir ver historial de facturas

6. BRANDING (OPCIONAL)
   
   - URL de retorno: https://agutidesigns.vercel.app/client-dashboard/
   - Color principal: #0046FE (azul corporativo)
   - Logo: Sube tu logo si quieres

7. GUARDAR CAMBIOS
   - Click en "Save changes" o "Guardar cambios"
   - Â¡Listo!

FLUJO COMPLETO:
---------------

1. Cliente â†’ Dashboard â†’ FacturaciÃ³n
2. Cliente â†’ Click en "ðŸ’³ Gestionar en Stripe"
3. âœ… APARECE MENSAJE con advertencia de 6 meses (desde nuestro dashboard)
4. Cliente â†’ Acepta â†’ Redirige a Stripe Customer Portal
5. Cliente â†’ Ve opciones: MÃ©todos de pago, facturas, cancelar
6. Si cancela:
   - Stripe â†’ EnvÃ­a webhook "customer.subscription.deleted"
   - Backend â†’ Detecta automÃ¡ticamente
   - Backend â†’ Registra en tabla "cancellations"
   - Cliente â†’ Ve estado actualizado en dashboard
   - Admin â†’ Ve cancelaciÃ³n en su dashboard
   - Web â†’ Se mantiene activa hasta fin de perÃ­odo
   - DespuÃ©s de 6 meses â†’ Se elimina (implementaremos cron job)

RESULTADO FINAL:
----------------
âœ… Cliente informado ANTES de ir a Stripe
âœ… ConfiguraciÃ³n de Stripe mÃ¡s simple
âœ… Todo funciona automÃ¡ticamente
âœ… No se requiere configuraciÃ³n compleja en Stripe

Â¿PROBLEMAS?
-----------
Si no encuentras alguna opciÃ³n:
- AsegÃºrate de estar en el modo "Test" (esquina superior derecha)
- Algunos planes de Stripe pueden tener opciones limitadas
- Las opciones bÃ¡sicas (cancelar, mÃ©todos de pago, facturas) estÃ¡n en todos los planes
