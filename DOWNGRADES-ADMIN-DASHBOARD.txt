â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… DOWNGRADES VISIBLES EN TODO EL ADMIN DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ SOLICITUD:
"Si hago un downgrade del plan debe actualizarse en el admin 
en todos los sitios tambiÃ©n"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… IMPLEMENTACIÃ“N COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ahora los DOWNGRADES se muestran en TODAS las secciones del 
admin dashboard con badges distintivos morados:

1. ğŸ“‹ SECCIÃ“N PEDIDOS (Tabla)
   
   UBICACIÃ“N: Lista de pedidos
   
   VISUAL:
   #123 | Negocio ABC  ğŸ”½ DOWNGRADE  âœï¸ MODIFICADO
        | avanzado â†’ basico
   
   BADGE:
   - Color: Morado (#9333ea)
   - Texto: "ğŸ”½ DOWNGRADE"
   - Fondo con fila azul claro si hay downgrade
   - Se muestra junto a UPGRADE y MODIFICADO

2. ğŸ“ MODAL DE DETALLE DE PEDIDO
   
   UBICACIÃ“N: Al hacer clic en "Ver" de un pedido
   
   VISUAL:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Plan Contratado  ğŸ”½ DOWNGRADE      â”‚â† Badge morado
   â”‚                                     â”‚
   â”‚ Plan: BÃ¡sico                        â”‚
   â”‚ Anterior: Avanzado                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   BADGE:
   - Color: Morado semi-transparente
   - Texto: "ğŸ”½ DOWNGRADE"
   - Aparece en el header del plan

3. ğŸŒ KANBAN (Webs)
   
   UBICACIÃ“N: Tarjetas de proyectos
   
   VISUAL:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â”‚ Proyecto ABC  ğŸ”½ DOWN  â”‚â† Borde morado + Badge
   â”‚ â”‚ ğŸ‘¤ Cliente XYZ         â”‚
   â”‚ â”‚ ğŸ“§ email@ejemplo.com   â”‚
   â”‚ â”‚ ğŸ“¦ BÃ¡sico              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   CARACTERÃSTICAS:
   - Borde izquierdo morado (4px)
   - Badge "ğŸ”½ DOWNGRADE" en el tÃ­tulo
   - Muestra el plan actualizado
   - Notas del proyecto actualizadas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ DISEÃ‘O DE BADGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

UPGRADE vs DOWNGRADE:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UPGRADE:                                             â”‚
â”‚ â€¢ Color: Naranja (#ff6b35 â†’ #f7931e)                â”‚
â”‚ â€¢ Icono: ğŸ”¼                                          â”‚
â”‚ â€¢ Significado: Cliente mejorÃ³ su plan               â”‚
â”‚ â€¢ AcciÃ³n: Proyecto reabierto, 24h reactivadas      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOWNGRADE:                                           â”‚
â”‚ â€¢ Color: Morado (#9333ea â†’ #7e22ce)                 â”‚
â”‚ â€¢ Icono: ğŸ”½                                          â”‚
â”‚ â€¢ Significado: Cliente bajÃ³ de plan                 â”‚
â”‚ â€¢ AcciÃ³n: PÃ¡ginas eliminadas (si excedÃ­a lÃ­mite)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MODIFICADO:                                          â”‚
â”‚ â€¢ Color: Azul (#0046FE)                              â”‚
â”‚ â€¢ Icono: âœï¸                                          â”‚
â”‚ â€¢ Significado: Cliente editÃ³ sus datos              â”‚
â”‚ â€¢ AcciÃ³n: Cambios pendientes de revisar             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ CAMBIOS TÃ‰CNICOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. BASE DE DATOS (database.js)

   NUEVOS CAMPOS:
   
   tabla `submissions`:
   â€¢ is_downgrade BOOLEAN DEFAULT FALSE
   
   tabla `projects`:
   â€¢ is_downgrade BOOLEAN DEFAULT FALSE
   
   MIGRACIÃ“N AUTOMÃTICA:
   Se ejecuta al arrancar Railway, no requiere acciÃ³n manual

2. BACKEND (server.js)

   ENDPOINT: POST /api/client/change-plan
   
   LÃ“GICA DE DOWNGRADE:
   
   ```javascript
   if (isDowngrade) {
       // 1. Actualizar submission
       await db.pool.query(`
           UPDATE submissions 
           SET plan = $1, 
               amount = $2, 
               previous_plan = $3,
               is_downgrade = true,
               has_upgrade = false,
               last_modified_at = CURRENT_TIMESTAMP
           WHERE id = $4
       `, [newPlan, newAmount, oldPlan, submissionId]);
       
       // 2. Actualizar proyecto
       await db.pool.query(`
           UPDATE projects 
           SET is_upgrade = false,
               is_downgrade = true,
               plan = $1
           WHERE client_id = $2
       `, [newPlan, clientId]);
       
       // 3. Actualizar notas del proyecto
       const note = `Plan actualizado: ${oldPlan} â†’ ${newPlan}. 
                     Downgrade confirmado. 
                     PÃ¡ginas eliminadas: ${pagesToRemove.join(', ')}.`;
                     
       await db.pool.query(`
           UPDATE projects 
           SET notes = $1 
           WHERE client_id = $2
       `, [note, clientId]);
       
       // 4. Actualizar cliente
       await db.pool.query(`
           UPDATE clients 
           SET plan = $1 
           WHERE id = $2
       `, [newPlan, clientId]);
   }
   ```
   
   STRIPE:
   TambiÃ©n se actualiza la suscripciÃ³n en Stripe con el nuevo plan

3. ADMIN DASHBOARD (index.html)

   CAMBIOS EN PEDIDOS:
   
   LÃ­nea 2111:
   ```javascript
   ${pedido.is_downgrade ? 
     '<span class="badge" style="background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%); color: white; font-size: 0.7rem; padding: 3px 8px;">ğŸ”½ DOWNGRADE</span>' 
     : ''}
   ```
   
   CAMBIOS EN KANBAN:
   
   LÃ­nea 3418:
   ```javascript
   <div class="kanban-card" 
        ${project.is_upgrade ? 'style="border-left: 4px solid #ff6b35;"' 
          : project.is_downgrade ? 'style="border-left: 4px solid #9333ea;"' 
          : ''}>
   ```
   
   LÃ­nea 3422:
   ```javascript
   ${project.is_downgrade ? 
     '<span class="badge" style="background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%); color: white; margin-left: 8px; font-size: 0.7rem; padding: 3px 8px;">ğŸ”½ DOWNGRADE</span>' 
     : ''}
   ```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ FLUJO COMPLETO DE DOWNGRADE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 1: Cliente solicita downgrade
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cliente Dashboard                   â”‚
â”‚ â†’ SecciÃ³n "FacturaciÃ³n"            â”‚
â”‚ â†’ Clic en "Cambiar Plan"           â”‚
â”‚ â†’ Selecciona plan inferior         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

PASO 2: ValidaciÃ³n de pÃ¡ginas
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Si pÃ¡ginas > lÃ­mite nuevo plan:    â”‚
â”‚ â†’ Modal: "Selecciona pÃ¡ginas a     â”‚
â”‚   eliminar"                         â”‚
â”‚ â†’ Cliente elige quÃ© pÃ¡ginas quitar â”‚
â”‚ â†’ Confirma o cancela               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

PASO 3: ActualizaciÃ³n en Stripe
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend llama a Stripe API          â”‚
â”‚ â†’ Actualiza subscription            â”‚
â”‚ â†’ Cambia price_id al nuevo plan    â”‚
â”‚ â†’ Prorratea el cambio               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

PASO 4: ActualizaciÃ³n en Base de Datos
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ clients: plan = nuevo             â”‚
â”‚ â€¢ submissions: is_downgrade = true  â”‚
â”‚ â€¢ submissions: previous_plan        â”‚
â”‚ â€¢ submissions: pages actualizado    â”‚
â”‚ â€¢ projects: is_downgrade = true     â”‚
â”‚ â€¢ projects: plan = nuevo            â”‚
â”‚ â€¢ projects: notes actualizado       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

PASO 5: Visible en Admin Dashboard
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PEDIDOS:                            â”‚
â”‚ âœ… Badge "ğŸ”½ DOWNGRADE" morado     â”‚
â”‚ âœ… Plan actualizado                 â”‚
â”‚ âœ… Previous_plan visible            â”‚
â”‚                                     â”‚
â”‚ KANBAN:                             â”‚
â”‚ âœ… Borde morado                     â”‚
â”‚ âœ… Badge "ğŸ”½ DOWNGRADE"            â”‚
â”‚ âœ… Notas actualizadas              â”‚
â”‚                                     â”‚
â”‚ MODAL DETALLE:                      â”‚
â”‚ âœ… Badge en header de plan          â”‚
â”‚ âœ… Plan anterior mostrado           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š ESTADOS POSIBLES DE UN PEDIDO/PROYECTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESTADO 1: NUEVO (inicial)                                â”‚
â”‚ â€¢ has_upgrade: false                                     â”‚
â”‚ â€¢ is_downgrade: false                                    â”‚
â”‚ â€¢ has_modifications: false                               â”‚
â”‚ â†’ Sin badges                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESTADO 2: UPGRADE                                        â”‚
â”‚ â€¢ has_upgrade: true                                      â”‚
â”‚ â€¢ is_downgrade: false                                    â”‚
â”‚ â€¢ previous_plan: plan anterior                           â”‚
â”‚ â†’ Badge naranja "ğŸ”¼ UPGRADE"                            â”‚
â”‚ â†’ Proyecto reabierto si estaba finalizado               â”‚
â”‚ â†’ 24h de ediciÃ³n reactivadas                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESTADO 3: DOWNGRADE                                      â”‚
â”‚ â€¢ has_upgrade: false                                     â”‚
â”‚ â€¢ is_downgrade: true                                     â”‚
â”‚ â€¢ previous_plan: plan anterior                           â”‚
â”‚ â†’ Badge morado "ğŸ”½ DOWNGRADE"                           â”‚
â”‚ â†’ PÃ¡ginas reducidas (si excedÃ­a lÃ­mite)                 â”‚
â”‚ â†’ Proyecto mantiene estado actual                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESTADO 4: MODIFICADO (despuÃ©s de upgrade/downgrade)     â”‚
â”‚ â€¢ (has_upgrade O is_downgrade): true                     â”‚
â”‚ â€¢ has_modifications: true                                â”‚
â”‚ â†’ Badges mÃºltiples: UPGRADE/DOWNGRADE + MODIFICADO      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª CÃ“MO PROBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRUEBA 1: Downgrade sin exceder pÃ¡ginas

1. Cliente tiene plan Avanzado (10 pÃ¡ginas)
2. Tiene 7 pÃ¡ginas configuradas
3. Cambia a plan BÃ¡sico (5 pÃ¡ginas)
4. Sistema pide eliminar 2 pÃ¡ginas
5. Cliente selecciona 2 pÃ¡ginas
6. âœ… Confirmar cambio

VERIFICAR EN ADMIN:
â†’ SecciÃ³n "Pedidos": Badge morado "ğŸ”½ DOWNGRADE"
â†’ Kanban: Borde morado + Badge
â†’ Plan actualizado: BÃ¡sico (antes: Avanzado)
â†’ Notas: "PÃ¡ginas eliminadas: X, Y"

PRUEBA 2: Downgrade dentro del lÃ­mite

1. Cliente tiene plan Premium (20 pÃ¡ginas)
2. Tiene 8 pÃ¡ginas configuradas
3. Cambia a plan Avanzado (10 pÃ¡ginas)
4. No se piden pÃ¡ginas (8 < 10)
5. âœ… Cambio inmediato

VERIFICAR EN ADMIN:
â†’ Badge morado "ğŸ”½ DOWNGRADE"
â†’ Plan actualizado
â†’ No hay pÃ¡ginas eliminadas en notas

PRUEBA 3: Upgrade despuÃ©s de Downgrade

1. Cliente tiene BÃ¡sico con is_downgrade = true
2. Cambia a Avanzado
3. âœ… is_downgrade se pone en false
4. âœ… has_upgrade se pone en true
5. Badge cambia de morado a naranja

VERIFICAR EN ADMIN:
â†’ Badge naranja "ğŸ”¼ UPGRADE" (ya no morado)
â†’ is_downgrade = false
â†’ has_upgrade = true

PRUEBA 4: MÃºltiples badges

1. Cliente hace downgrade
2. Badge morado "ğŸ”½ DOWNGRADE" aparece
3. Cliente edita datos en "Mi Negocio"
4. Badge azul "âœï¸ MODIFICADO" se aÃ±ade
5. âœ… Ambos badges visibles simultÃ¡neamente

VERIFICAR EN ADMIN:
â†’ Dos badges: ğŸ”½ DOWNGRADE + âœï¸ MODIFICADO
â†’ Fondo azul claro en la fila

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ DETALLES IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. DIFERENCIA UPGRADE vs DOWNGRADE

   UPGRADE:
   âœ“ Reabre proyecto si estaba finalizado
   âœ“ Reactiva 24h de ediciÃ³n
   âœ“ Progreso vuelve a 50% si estaba al 100%
   âœ“ Cliente puede aÃ±adir mÃ¡s pÃ¡ginas
   
   DOWNGRADE:
   âœ“ NO reabre proyecto
   âœ“ NO reactiva 24h
   âœ“ Progreso se mantiene
   âœ“ PÃ¡ginas se reducen si exceden lÃ­mite

2. ELIMINACIÃ“N DE PÃGINAS

   Solo se eliminan si:
   â€¢ PÃ¡ginas actuales > lÃ­mite nuevo plan
   â€¢ Cliente debe seleccionar manualmente
   â€¢ Se guardan en notas del proyecto
   â€¢ Se notifica al admin vÃ­a ticket

3. PRIORIDAD DE BADGES

   Si un pedido tiene mÃºltiples estados:
   â€¢ UPGRADE o DOWNGRADE (mutuamente excluyentes)
   â€¢ + MODIFICADO (compatible con ambos)
   
   Nunca: UPGRADE + DOWNGRADE al mismo tiempo

4. PERSISTENCIA

   Los flags is_upgrade e is_downgrade:
   â€¢ Se mantienen hasta nuevo cambio de plan
   â€¢ Solo se resetean con otro cambio
   â€¢ Sirven para historial de cambios

5. SINCRONIZACIÃ“N

   Cuando hay downgrade, se actualizan:
   âœ“ clients.plan
   âœ“ submissions.plan, is_downgrade, previous_plan
   âœ“ projects.plan, is_downgrade, notes
   âœ“ stripe.subscription
   âœ“ Visual en admin (pedidos, kanban, modal)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š ARCHIVOS MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… backend/database.js
   - LÃ­neas 267-276: MigraciÃ³n is_downgrade en submissions
   - LÃ­neas 278-287: MigraciÃ³n is_downgrade en projects

âœ… backend/server.js
   - LÃ­neas 2851-2906: LÃ³gica completa de downgrade
   - ActualizaciÃ³n de submissions
   - ActualizaciÃ³n de projects
   - ActualizaciÃ³n de notas
   - SincronizaciÃ³n con Stripe

âœ… admin-dashboard/index.html
   - LÃ­nea 2105: Fondo azul si hay downgrade
   - LÃ­nea 2111: Badge morado en tabla de pedidos
   - LÃ­neas 2180-2181: Badge en modal de detalle
   - LÃ­nea 3418: Borde morado en Kanban
   - LÃ­nea 3422: Badge morado en tarjeta Kanban

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… ESTADO ACTUAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Downgrades visibles: EN TODOS LOS SITIOS âœ…
â€¢ Badge morado distintivo: IMPLEMENTADO âœ…
â€¢ ActualizaciÃ³n de base de datos: COMPLETA âœ…
â€¢ SincronizaciÃ³n con Stripe: ACTIVA âœ…
â€¢ Notas de proyecto: ACTUALIZADAS âœ…
â€¢ Deploy backend: ~1 minuto â±ï¸
â€¢ Deploy frontend: ~30 segundos â±ï¸

TODO FUNCIONANDO ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

