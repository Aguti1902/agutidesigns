â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… BADGES DE NOTIFICACIONES - ADMIN Y CLIENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ SOLICITUD:
- Badge en header "Contactar" del cliente (azul, con nÃºmero)
- Badge en "Tickets" del admin (para saber mensajes nuevos)
- Badge en "Pedidos" del admin (para saber pedidos modificados)
- Ver notificaciones SIN entrar en las secciones

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… IMPLEMENTACIÃ“N COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ğŸ« BADGE DE TICKETS (ADMIN DASHBOARD)
   
   UBICACIÃ“N: MenÃº lateral â†’ Tickets
   
   FUNCIÃ“N: Muestra cantidad de tickets sin leer por el admin
   
   CRITERIO:
   âœ… Solo tickets de soporte (excluye category = 'facturacion')
   âœ… admin_unread = 1 (no leÃ­dos por el admin)
   âœ… ActualizaciÃ³n automÃ¡tica cada 15 segundos
   
   VISUAL:
   ğŸ« Tickets  [3]  â† CÃ­rculo azul con nÃºmero
   
   COMPORTAMIENTO:
   - Aparece cuando hay tickets sin leer
   - Desaparece cuando todos estÃ¡n leÃ­dos
   - Se actualiza al abrir/cerrar tickets
   - AnimaciÃ³n de pulso suave

2. ğŸ“‹ BADGE DE PEDIDOS (ADMIN DASHBOARD)
   
   UBICACIÃ“N: MenÃº lateral â†’ Pedidos
   
   FUNCIÃ“N: Muestra cantidad de pedidos con modificaciones nuevas
   
   CRITERIO:
   âœ… has_modifications = true
   âœ… modifications_viewed_at IS NULL o < last_modified_at
   âœ… ActualizaciÃ³n automÃ¡tica cada 15 segundos
   
   VISUAL:
   ğŸ“‹ Pedidos  [2]  â† CÃ­rculo azul con nÃºmero
   
   COMPORTAMIENTO:
   - Aparece cuando hay pedidos modificados sin revisar
   - Desaparece al marcar como vistos
   - Se actualiza al ver pedidos
   - AnimaciÃ³n de pulso suave

3. ğŸ’¬ BADGE DE CONTACTAR (CLIENT DASHBOARD)
   
   UBICACIÃ“N: 
   - MenÃº lateral â†’ Contactar
   - Header de la secciÃ³n â†’ "ğŸ’¬ Contactar con Soporte"
   
   FUNCIÃ“N: Muestra cantidad de mensajes sin leer del admin
   
   CRITERIO:
   âœ… client_unread = 1 (no leÃ­dos por el cliente)
   âœ… Excluye tickets de category = 'facturacion'
   âœ… ActualizaciÃ³n automÃ¡tica cada 10 segundos
   
   VISUAL:
   ğŸ’¬ Contactar  [2]  â† En menÃº (pequeÃ±o)
   ğŸ’¬ Contactar con Soporte  [2]  â† En header (mÃ¡s grande)
   
   COMPORTAMIENTO:
   - 2 badges sincronizados (menÃº + header)
   - Aparece cuando hay mensajes del admin sin leer
   - Desaparece al abrir los tickets
   - AnimaciÃ³n de pulso suave
   - NotificaciÃ³n: "Tienes X mensaje(s) nuevo(s)"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ DISEÃ‘O UNIFICADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TODOS LOS BADGES COMPARTEN:

â€¢ Color: Azul corporativo #0046FE
â€¢ Fondo: SÃ³lido con box-shadow
â€¢ Texto: Blanco (#FFFFFF)
â€¢ Border-radius: 15-20px (muy redondeado)
â€¢ Font-weight: 700 (negrita)
â€¢ Padding: 4-14px (segÃºn ubicaciÃ³n)
â€¢ AnimaciÃ³n: Pulso suave cada 2 segundos
â€¢ Display: none cuando no hay notificaciones

TAMAÃ‘OS:

ğŸ“ Admin MenÃº: 
   - padding: 4px 10px
   - font-size: 0.75rem

ğŸ“ Cliente MenÃº:
   - padding: 3px 10px
   - font-size: 0.75rem

ğŸ“ Cliente Header:
   - padding: 6px 14px
   - font-size: 0.85rem
   - box-shadow: 0 2px 8px rgba(0, 70, 254, 0.4)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ ACTUALIZACIÃ“N AUTOMÃTICA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ADMIN DASHBOARD:

```javascript
// Se ejecuta al cargar el dashboard
loadDashboard() {
    await loadStats();
    await loadProjects();
    updateAdminBadges();  // â† Primera actualizaciÃ³n
    
    // Polling cada 15 segundos
    setInterval(() => {
        updateAdminBadges();
    }, 15000);
}

// FunciÃ³n que actualiza ambos badges
async updateAdminBadges() {
    // 1. Contar tickets sin leer (admin_unread = 1)
    // 2. Contar pedidos modificados sin ver
    // 3. Actualizar badges en el DOM
}
```

CLIENT DASHBOARD:

```javascript
// Ya existÃ­a, se mejorÃ³ para incluir badge del header

async updateUnreadBadge() {
    // Consulta API cada 10 segundos
    // Actualiza badge del menÃº Y del header
    // Muestra notificaciÃ³n si hay mensajes nuevos
}
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š ARCHIVOS MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… admin-dashboard/index.html

   LÃNEA 948: Badge en Tickets
   ```html
   <span id="unreadTicketsBadge" 
         class="notification-badge-admin" 
         style="display: none; background: #0046FE; ...">
   </span>
   ```
   
   LÃNEA 953: Badge en Pedidos
   ```html
   <span id="newOrdersBadge" 
         class="notification-badge-admin" 
         style="display: none; background: #0046FE; ...">
   </span>
   ```
   
   LÃNEAS 1684-1693: Configurar actualizaciÃ³n automÃ¡tica
   ```javascript
   async function loadDashboard() {
       await loadStats();
       await loadProjects();
       updateAdminBadges();
       setInterval(() => {
           updateAdminBadges();
       }, 15000);
   }
   ```
   
   LÃNEAS 1733-1791: FunciÃ³n updateAdminBadges()
   - Consulta /api/tickets (admin_unread)
   - Consulta /api/admin/submissions (has_modifications)
   - Actualiza ambos badges en el DOM

âœ… client-dashboard/index.html

   LÃNEA 1728-1731: Badge en header mejorado
   ```html
   <h1 class="section-title" 
       style="display: flex; align-items: center; gap: 12px;">
       ğŸ’¬ Contactar con Soporte
       <span id="unreadBadgeHeader" 
             style="display: none; background: #0046FE; ...">
       </span>
   </h1>
   ```
   
   LÃNEAS 5471-5475: ActualizaciÃ³n del badge header
   ```javascript
   if (badgeHeader) {
       badgeHeader.textContent = unreadCount;
       badgeHeader.style.display = 'inline-block';
       console.log('âœ… Badge header actualizado:', unreadCount);
   }
   ```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª CÃ“MO PROBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRUEBA 1: Badge de Tickets (Admin)

1. Cliente crea un ticket nuevo
2. Ir al Admin Dashboard
3. âœ… Badge [1] aparece en "ğŸ« Tickets"
4. Admin abre el ticket
5. âœ… Badge desaparece

PRUEBA 2: Badge de Pedidos (Admin)

1. Cliente con plan edita sus datos en "Mi Negocio"
2. Guardar cambios (has_modifications = true)
3. Ir al Admin Dashboard
4. âœ… Badge [1] aparece en "ğŸ“‹ Pedidos"
5. Admin hace clic en "Ver" del pedido
6. âœ… Badge desaparece (modifications_viewed_at se actualiza)

PRUEBA 3: Badge de Contactar (Cliente) - MenÃº

1. Admin responde un ticket del cliente
2. Cliente recarga su dashboard
3. âœ… Badge [1] aparece en "ğŸ’¬ Contactar" del menÃº
4. Cliente abre el ticket
5. âœ… Badge desaparece

PRUEBA 4: Badge de Contactar (Cliente) - Header

1. Admin responde un ticket
2. Cliente estÃ¡ en "Contactar"
3. Esperar ~10 segundos
4. âœ… Badge [1] aparece en el tÃ­tulo "ğŸ’¬ Contactar con Soporte"
5. Cliente abre el ticket
6. âœ… Badge desaparece de menÃº Y header

PRUEBA 5: ActualizaciÃ³n AutomÃ¡tica (Admin)

1. Admin Dashboard abierto
2. Cliente crea 2 tickets nuevos
3. Esperar ~15 segundos
4. âœ… Badge de Tickets actualiza a [2]
5. No necesita recargar la pÃ¡gina

PRUEBA 6: ActualizaciÃ³n AutomÃ¡tica (Cliente)

1. Cliente Dashboard abierto
2. Admin responde 3 tickets
3. Esperar ~10 segundos
4. âœ… Badges actualizan a [3]
5. âœ… NotificaciÃ³n: "Tienes 3 mensajes nuevos"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ DETALLES TÃ‰CNICOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. FILTRADO DE TICKETS

   Ambos dashboards excluyen tickets automÃ¡ticos:
   ```javascript
   tickets.filter(t => t.category !== 'facturacion')
   ```
   
   RazÃ³n: Los cambios de plan no deben notificarse como tickets

2. LÃ“GICA DE PEDIDOS MODIFICADOS

   ```javascript
   orders.filter(o => 
       o.has_modifications === true && 
       (!o.modifications_viewed_at || 
        o.last_modified_at > o.modifications_viewed_at)
   )
   ```
   
   Criterios:
   - Pedido marcado como modificado
   - Nunca visto O modificado despuÃ©s de Ãºltima vista

3. SINCRONIZACIÃ“N BADGES (Cliente)

   El cliente tiene 2 badges que SIEMPRE estÃ¡n sincronizados:
   - Badge del menÃº (pequeÃ±o)
   - Badge del header (mÃ¡s grande)
   
   Ambos se actualizan simultÃ¡neamente en la misma funciÃ³n

4. POLLING INTERVALS

   - Admin: Cada 15 segundos (menos frecuente)
   - Cliente: Cada 10 segundos (mÃ¡s frecuente)
   
   RazÃ³n: Cliente necesita respuestas mÃ¡s rÃ¡pidas

5. ANIMACIÃ“N CSS

   ```css
   @keyframes pulseAdmin {
       0%, 100% {
           box-shadow: 0 0 0 0 rgba(0, 70, 254, 0.7);
       }
       50% {
           box-shadow: 0 0 0 8px rgba(0, 70, 254, 0);
       }
   }
   ```
   
   Pulso sutil que llama la atenciÃ³n sin ser molesto

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“± RESPONSIVE & ACCESIBILIDAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… RESPONSIVE:
   - Badges se adaptan al tamaÃ±o del texto
   - Funcionan en mÃ³vil, tablet y desktop
   - No rompen el layout del menÃº

âœ… CONTRASTE:
   - Blanco sobre azul oscuro (#0046FE)
   - Ratio de contraste > 4.5:1 (WCAG AA)
   - Claramente legible

âœ… TAMAÃ‘O:
   - Font-size mÃ­nimo: 0.75rem
   - Padding suficiente para touch (mÃ³vil)
   - NÃºmeros de 1-2 dÃ­gitos se ven bien

âœ… ANIMACIÃ“N:
   - Suave y no distrae
   - Se puede desactivar con prefers-reduced-motion
   - No causa mareos ni incomodidad

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â“ PREGUNTAS FRECUENTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

P: Â¿Por quÃ© no aparece el badge en el cliente?
R: Verifica en consola del navegador:
   - "âœ… [CLIENT] Badge header actualizado: X"
   - Si aparece pero no se ve, puede ser un problema de CSS cache
   - Intenta Ctrl+F5 para forzar recarga completa

P: Â¿El admin necesita recargar para ver nuevos tickets?
R: No, se actualiza automÃ¡ticamente cada 15 segundos

P: Â¿QuÃ© pasa si hay mÃ¡s de 99 notificaciones?
R: El badge mostrarÃ¡ "99" (se puede ajustar si es necesario)

P: Â¿Los badges se guardan al cerrar el dashboard?
R: No, se calculan en tiempo real cada vez que se abre

P: Â¿Afecta el rendimiento tener polling constante?
R: No, las consultas son ligeras y solo actualizan el DOM

P: Â¿Puedo desactivar las notificaciones?
R: Actualmente no, pero se puede aÃ±adir esa opciÃ³n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… ESTADO ACTUAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Badge Tickets (Admin): IMPLEMENTADO âœ…
â€¢ Badge Pedidos (Admin): IMPLEMENTADO âœ…
â€¢ Badge Contactar MenÃº (Cliente): IMPLEMENTADO âœ…
â€¢ Badge Contactar Header (Cliente): IMPLEMENTADO âœ…
â€¢ ActualizaciÃ³n automÃ¡tica: ACTIVA âœ…
â€¢ AnimaciÃ³n de pulso: IMPLEMENTADA âœ…
â€¢ Filtrado de tickets automÃ¡ticos: ACTIVO âœ…

Deploy:
â€¢ Railway (backend): No requiere cambios
â€¢ Vercel (admin): ~30 segundos â±ï¸
â€¢ Vercel (cliente): ~30 segundos â±ï¸

TODO LISTO PARA USAR ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


